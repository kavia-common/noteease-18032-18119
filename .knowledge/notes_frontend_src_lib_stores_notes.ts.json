{"is_source_file": true, "format": "TypeScript", "description": "This file manages notes in a note-taking app, including state management using Svelte stores, local storage persistence, and API interactions for CRUD operations.", "external_files": ["$lib/types", "$lib/services/api"], "external_methods": ["apiCreateNote", "apiDeleteNote", "apiListNotes", "apiUpdateNote"], "published": ["notes", "selectedId", "searchTerm", "filteredNotes", "selectedNote", "initNotes", "createNote", "updateNote", "deleteNote", "selectNote", "setSearch"], "classes": [], "methods": [{"name": "function loadLocal(): Note[] { loadLocal", "description": "Loads notes from local storage, parsing JSON and handling errors gracefully.", "scope": "", "scopeKind": ""}, {"name": "function saveLocal(notes: Note[]) { saveLocal", "description": "Saves the current notes array to local storage.", "scope": "", "scopeKind": ""}, {"name": "function sortNotes(a: Note, b: Note) { sortNotes", "description": "Comparator function to sort notes based on their updatedAt timestamp in descending order.", "scope": "", "scopeKind": ""}, {"name": "export async function createNote(input: CreateNoteInput = {}) { createNote", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function deleteNote(id: NoteID) { deleteNote", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function initNotes() { initNotes", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function selectNote(id: NoteID | null) { selectNote", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function setSearch(q: string) { setSearch", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function updateNote(id: NoteID, input: UpdateNoteInput) { updateNote", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "new Date", "get", "apiListNotes", "apiCreateNote", "apiUpdateNote", "apiDeleteNote"], "search-terms": ["Svelte store", "notes store", "local storage notes", "notes CRUD", "note filtering", "note sorting", "note selection", "notes frontend"], "state": 2, "file_id": 16, "knowledge_revision": 44, "git_revision": "", "revision_history": [{"33": ""}, {"44": ""}], "ctags": [{"_type": "tag", "name": "LS_KEY", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^const LS_KEY = \"noteease.notes.v1\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "arr", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const arr = JSON.parse(raw) as Note[];$/", "language": "TypeScript", "kind": "constant", "scope": "loadLocal", "scopeKind": "function"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export async function createNote(input: CreateNoteInput = {}) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "created", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const created = await apiCreateNote({$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "current", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const current = get(notes);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "current", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const current = get(notes);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export async function deleteNote(id: NoteID) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetched", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const fetched = await apiListNotes();$/", "language": "TypeScript", "kind": "constant", "scope": "initNotes", "scopeKind": "function"}, {"_type": "tag", "name": "filteredNotes", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export const filteredNotes = derived($/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "i", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const i = arr.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const idx = current.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const idx = current.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const original = current[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "initNotes", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export async function initNotes() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "loadLocal", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^function loadLocal(): Note[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "local", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const local = loadLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "initNotes", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const next = [...arr];$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const next = [created, ...arr].sort(sortNotes);$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "nextAfterDelete", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const nextAfterDelete = current.filter((n) => n.id !== id);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export const notes = writable<Note[]>([]);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "optimistic", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const optimistic: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "original", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const original = current[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const raw = localStorage.getItem(LS_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "loadLocal", "scopeKind": "function"}, {"_type": "tag", "name": "saveLocal", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^function saveLocal(notes: Note[]) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "saved", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const saved = await apiUpdateNote(id, input);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "searchTerm", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export const searchTerm = writable<string>(\"\");$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "selectNote", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export function selectNote(id: NoteID | null) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "selected", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const selected = get(selectedId);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "selectedId", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export const selectedId = writable<NoteID | null>(null);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "selectedNote", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export const selectedNote = derived([notes, selectedId], ([$notes, $id]) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "setSearch", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export function setSearch(q: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "sortNotes", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^function sortNotes(a: Note, b: Note) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "sorted", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const sorted = next.sort(sortNotes);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export async function updateNote(id: NoteID, input: UpdateNoteInput) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/noteease-18032-18119/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    updatedAt: new Date().toISOString()$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}], "hash": "6f3d88e56fd53eaee7fb1776228b5b5f", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/stores/notes.ts"}